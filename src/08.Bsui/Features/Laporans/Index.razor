@page "/Laporans"
@using Pertamina.SIMIT.Shared.Laporans.Queries.GetLaporans

<BrowserTabTitle>@DisplayTextFor.DokumenMahasiswa</BrowserTabTitle>
<MudBreadcrumbs Items="_breadcrumbItems"></MudBreadcrumbs>
<PageHeader Title="@DisplayTextFor.RekapDokumenMahasiswa" />
<ErrorViewer Error="_error" />

 <MudTable Elevation="0" Hover="true" Breakpoint="Breakpoint.Sm"
              FixedHeader="true" Height="@HeightFor.ScrollableTable"
              @ref="_tableLaporans"
              ServerData="@(new Func<TableState, Task<TableData<GetLaporansLaporan>>>(ReloadTableLaporans))">
   @*            CommitEditTooltip="@($"{CommonDisplayTextFor.Commit} {CommonDisplayTextFor.Edit}")" *@
			@* RowEditCommit="EditCommit" RowEditPreview="EditPreview" RowEditCancel="EditCancel"> *@

	<ToolBarContent>
		<MudTextField Adornment="Adornment.Start" AdornmentIcon="@Icons.Material.Filled.Search" Placeholder="@DisplayTextFor.CariNamaMahasiswa" T="string" ValueChanged="@(async(keyword) => await OnSearch(keyword))"></MudTextField>
	</ToolBarContent>

	<HeaderContent>
		<MudTh><MudTableSortLabel SortLabel="@nameof(GetLaporansLaporan.MahasiswaNama)" T="GetLaporansLaporan">@DisplayTextFor.Nama</MudTableSortLabel></MudTh>
		<MudTh><MudTableSortLabel SortLabel="@nameof(GetLaporansLaporan.MahasiswaKampus)" T="GetLaporansLaporan">@DisplayTextFor.Kampus</MudTableSortLabel></MudTh>
		<MudTh><MudTableSortLabel SortLabel="@nameof(GetLaporansLaporan.FileLaporan)" T="GetLaporansLaporan">@DisplayTextFor.StatusLaporan</MudTableSortLabel></MudTh>
		<MudTh><MudTableSortLabel SortLabel="@nameof(GetLaporansLaporan.FileProject)" T="GetLaporansLaporan">@DisplayTextFor.StatusProject</MudTableSortLabel></MudTh>
	</HeaderContent>

	<RowTemplate>
		<MudTd DataLabel="@DisplayTextFor.Nama">
			<MudHighlighter Text="@context.MahasiswaNama" HighlightedText="@_searchKeyword" />
		</MudTd>

		<MudTd DataLabel="@DisplayTextFor.Kampus">
			<MudHighlighter Text="@context.MahasiswaKampus" HighlightedText="@_searchKeyword" />
		</MudTd>

		<MudTd DataLabel="@DisplayTextFor.StatusLaporan">
			@if (!string.IsNullOrEmpty(context.FileLaporan))
			{
				<MudIcon Icon="@Icons.Material.Filled.CheckCircle" Color="Color.Success" />
			}
			else
			{
				<MudIcon Icon="@Icons.Material.Filled.Cancel" Color="Color.Error" />
			}
		</MudTd>

		<MudTd DataLabel="@DisplayTextFor.StatusProject">
			@if (!string.IsNullOrEmpty(context.FileProject))
			{
				<MudIcon Icon="@Icons.Material.Filled.CheckCircle" Color="Color.Success" />
			}
			else
			{
				<MudIcon Icon="@Icons.Material.Filled.Cancel" Color="Color.Error" />
			}
		</MudTd>
	</RowTemplate>

	<PagerContent>
		<MudTablePager />
	</PagerContent>
</MudTable>
