@page "/Mahasiswas"

@using Pertamina.SIMIT.Shared.Mahasiswas.Queries.GetMahasiswas
@using static Pertamina.SIMIT.Shared.Mahasiswas.Constants.ApiEndpoint.V1


<BrowserTabTitle>@DisplayTextFor.DataMahasiswa</BrowserTabTitle>
<MudBreadcrumbs Items="_breadcrumbItems" Separator=">"></MudBreadcrumbs>
<PageHeader Title="@DisplayTextFor.RekapDataMahasiswa" />
<ErrorViewer Error="_error" />

<MudTable Elevation="0" Hover="true" Breakpoint="Breakpoint.Sm" Bordered="true"
              FixedHeader="true" Height="@HeightFor.ScrollableTable"
              @ref="_tableMahasiswas"
              ServerData="@(new Func<TableState, Task<TableData<GetMahasiswasMahasiswa>>>(ReloadTableMahasiswas))"
              CommitEditTooltip="@($"{CommonDisplayTextFor.Commit} {CommonDisplayTextFor.Edit}")"
			RowEditCommit="EditCommit" RowEditPreview="EditPreview" RowEditCancel="EditCancel">

	<ToolBarContent>
			<MudButton Variant="Variant.Filled" Color="Color.Primary" StartIcon="@Icons.Material.Filled.Add" OnClick="ShowDialogAdd">@CommonDisplayTextFor.Add @DisplayTextFor.Mahasiswa</MudButton>
		<MudSpacer />
		<MudTextField Variant="Variant.Outlined" Margin="Margin.Dense" Adornment="Adornment.Start" AdornmentIcon="@Icons.Material.Filled.Search" Placeholder="@CommonDisplayTextFor.Search" T="string" ValueChanged="@(async(keyword) => await OnSearch(keyword))"></MudTextField>
	</ToolBarContent>

	<HeaderContent>
		<MudTh><MudTableSortLabel SortLabel="@nameof(GetMahasiswasMahasiswa.Nama)" T="GetMahasiswasMahasiswa" Class="d-flex justify-center align-center">@DisplayTextFor.Nama</MudTableSortLabel></MudTh>
		<MudTh><MudTableSortLabel SortLabel="@nameof(GetMahasiswasMahasiswa.Nim)" T="GetMahasiswasMahasiswa" Class="d-flex justify-center align-center">@DisplayTextFor.Nim</MudTableSortLabel></MudTh>
		<MudTh><MudTableSortLabel SortLabel="@nameof(GetMahasiswasMahasiswa.Kampus)" T="GetMahasiswasMahasiswa" Class="d-flex justify-center align-center">@DisplayTextFor.Kampus</MudTableSortLabel></MudTh>
		<MudTh><MudTableSortLabel SortLabel="@nameof(GetMahasiswasMahasiswa.MulaiMagang)" T="GetMahasiswasMahasiswa" Class="d-flex justify-center align-center">@DisplayTextFor.MulaiMagang</MudTableSortLabel></MudTh>
		<MudTh><MudTableSortLabel SortLabel="@nameof(GetMahasiswasMahasiswa.SelesaiMagang)" T="GetMahasiswasMahasiswa" Class="d-flex justify-center align-center">@DisplayTextFor.SelesaiMagang</MudTableSortLabel></MudTh>
		<MudTh><MudTableSortLabel SortLabel="@nameof(GetMahasiswasMahasiswa.Bagian)" T="GetMahasiswasMahasiswa" Class="d-flex justify-center align-center">@DisplayTextFor.Bagian</MudTableSortLabel></MudTh>
		<MudTh><MudTableSortLabel SortLabel="@nameof(GetMahasiswasMahasiswa.PembimbingNama)" T="GetMahasiswasMahasiswa" Class="d-flex justify-center align-center">@DisplayTextFor.Pembimbing</MudTableSortLabel></MudTh>
		<MudTh><MudTableSortLabel SortLabel="@nameof(GetMahasiswasMahasiswa.LaporanId)" T="GetMahasiswasMahasiswa" Class="d-flex justify-center align-center">@DisplayTextFor.StatusDokumen</MudTableSortLabel></MudTh>
	</HeaderContent>
	<RowTemplate>
		<MudTd DataLabel="@DisplayTextFor.Nama">
			<MudLink Href="@RouteFor.Details(context.Id)">
				<MudHighlighter Text="@context.Nama" HighlightedText="@_searchKeyword" />
			</MudLink>
		</MudTd>
		<MudTd DataLabel="@DisplayTextFor.Nim">
			<MudHighlighter Text="@context.Nim" HighlightedText="@_searchKeyword" />
		</MudTd>
		<MudTd DataLabel="@DisplayTextFor.Kampus">
			<MudHighlighter Text="@context.Kampus.ToString()" HighlightedText="@_searchKeyword" />
		</MudTd>
		<MudTd DataLabel="@DisplayTextFor.MulaiMagang">
			<MudHighlighter Text="@context.MulaiMagang.ToString()" HighlightedText="@_searchKeyword" />
		</MudTd>
		<MudTd DataLabel="@DisplayTextFor.SelesaiMagang">
			<MudHighlighter Text="@context.SelesaiMagang.ToString()" HighlightedText="@_searchKeyword" />
		</MudTd>
		<MudTd DataLabel="@DisplayTextFor.Bagian">
			<MudHighlighter Text="@context.Bagian.ToString()" HighlightedText="@_searchKeyword" />
		</MudTd>
		<MudTd DataLabel="@DisplayTextFor.Pembimbing">
			<MudHighlighter Text="@context.PembimbingNama.ToString()" HighlightedText="@_searchKeyword" />
		</MudTd>

		<MudTd DataLabel="@DisplayTextFor.StatusDokumen" Class="d-flex justify-center align-center">
			@if (context.LaporanId != null)
			{
				<MudIcon Icon="@Icons.Material.Filled.CheckCircle" Color="Color.Success" />
			}
			else
			{
				<MudIcon Icon="@Icons.Material.Filled.Cancel" Color="Color.Error" />
			}
		</MudTd>


	</RowTemplate>
	<PagerContent>
		<MudTablePager />
	</PagerContent>
 </MudTable>
